---
title: "README"
output: github_document
date: "2023-08-08"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Fair Housing Map

CTCAC/HCD Opportunity and Neighborhood Change Map.

### Package Manual

[]

### Installation

1.  Clone repository

2.  Download data-raw directory and extract into root directory: <https://berkeley.app.box.com/folder/224592265510>

3.  Open package using "fairHousingMap.Rproj" file

4.  Load package and install dependencies:

```{r}
install.packages('devtools')
devtools::install_dev_deps(upgrade = 'always')
```

```{r}
devtools::load_all()
```

### Census API

1.  Register for Census API key [here](https://api.census.gov/data/key_signup.html).

2.  Install the key in the tidycensus package. See `?tidycensus::census_api_key()` for details

3.  Build directory paths not included in repository:

```{r}
lapply(2024, function(x){
  dir.create(paste0('data/intermediate/', x), recursive=T)
  dir.create(paste0('output/', x), recursive=T)
  dir.create('output/alternative_scenarios')
})
```

### Directory Structure

-   *data* - .Rda files of census polygon geographies.

    -   *intermediate* - intermediate data files.

-   *analysis* - .Rmd files of internal reports, exploratory analysis, etc.

-   *output* - Published datasets

-   *README* - project root documentation

-   *.gitignore* - instructions for git to ignore files.

-   *R* - R package functions, executes all code that goes into published tables and maps.

-   *map* - contains the webmaps for each year since 2019. Produced in javascript after 2019.

-   *tests* - testthat tests to ensure package is working as expected

### TODO

-   The legacy packages maptools, rgdal, and rgeos, underpinning the sp package, which was just loaded, will retire in October 2023. Replace functions that depend on sp with sf package equivalents
-   Develop testthat test suite
